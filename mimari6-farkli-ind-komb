AI TRADING SYSTEM ARCHITECTURE v2.7
(Dual-Time Adaptive Strategy â€“ 15m & 1h)
âš™ï¸ Genel TanÄ±m
Yeni sistem, iki baÄŸÄ±msÄ±z strateji motorunu (15m ve 1h) aynÄ± anda Ã§alÄ±ÅŸtÄ±rÄ±r.
Her motor kendi indikatÃ¶r setiyle, kendi optimizasyon alanÄ±nda Ã¶ÄŸrenir, RL ajanlarÄ± parametreleri paylaÅŸmaz.
Ama â€œTrade Managerâ€ tÃ¼m pozisyonlarÄ± tek portfÃ¶y seviyesinde yÃ¶netir (yani net toplam risk %2 sÄ±nÄ±rÄ±nÄ± aÅŸmaz).
ğŸ§© Katmanlar
1ï¸âƒ£ DATA LAYER
data_sources = {
  "feed": "Binance Testnet WebSocket",
  "timeframes": ["15m", "1h"],
  "coins": "Top 20 by market cap",
  "cache": "90 days rolling buffer",
  "execution_mode": "paper"
}
2ï¸âƒ£ CORE ENGINE LAYER
ArtÄ±k iki farklÄ± sinyal motoru var:
core_modules = {
  "signal_generators": {
    "15m": "SqueezeMomentum + SuperTrend + RVOL",
    "1h": "QQE MOD + ChandelierExit + RVOL"
  },
  "signal_interpreter": "multi-timeframe fusion",
  "position_state_manager": "dual state machine (15m/1h)",
  "risk_manager": "shared portfolio risk",
  "rl_agent": "two-headed PPO model (per timeframe)"
}
ğŸ” 15m Motor (Breakout Strategy)
AmaÃ§: Volatilite sÄ±kÄ±ÅŸmalarÄ±nda breakout yÃ¶nÃ¼nÃ¼ yakalamak.
Squeeze Momentum: sÄ±kÄ±ÅŸma â†’ geniÅŸleme
SuperTrend: trend yÃ¶n filtresi
RVOL: yÃ¼ksek hacim doÄŸrulamasÄ±
Sinyal mantÄ±ÄŸÄ±:
if squeeze == "FIRE_LONG" and supertrend == "UP" and rvol_ok:
    signal = "BUY"
elif squeeze == "FIRE_SHORT" and supertrend == "DOWN" and rvol_ok:
    signal = "SELL"
else:
    signal = "HOLD"
Optimizasyon parametreleri:
"squeeze": {"length": [10, 30], "mult": [1.3, 2.0]},
"supertrend": {"atr_period": [7, 14], "mult": [2.5, 4.0]},
"rvol": {"lookback": [10, 25], "threshold": [1.3, 2.0]}
ğŸ” 1h Motor (Momentum-Trend Strategy)
AmaÃ§: Trend devamÄ± ve gÃ¼venli Ã§Ä±kÄ±ÅŸ.
QQE MOD: momentum yÃ¶n deÄŸiÅŸimi
Chandelier Exit: dinamik ATR tabanlÄ± takip stopu
RVOL: iÅŸlem onayÄ±
Sinyal mantÄ±ÄŸÄ±:
if qqe == "UP" and rvol_ok:
    signal = "BUY"
elif qqe == "DOWN" and rvol_ok:
    signal = "SELL"
else:
    signal = "HOLD"
Risk/Exit mantÄ±ÄŸÄ±:
if price < chandelier_exit and trend == "DOWN":
    close_position()
Optimizasyon parametreleri:
"qqe": {"rsi_period": [10, 20], "smoothing": [3, 6], "atr_mult": [2.0, 4.0]},
"chandelier": {"lookback": [15, 30], "multiplier": [2.5, 4.0]},
"rvol": {"lookback": [15, 30], "threshold": [1.4, 2.0]}
3ï¸âƒ£ LEARNING LAYER (RL + Adaptive Optimization)
learning_system = {
  "rl_agents": {
    "15m": "PPO_Agent_ShortTerm",
    "1h": "PPO_Agent_LongTerm"
  },
  "optimizer": "Bayesian search per timeframe",
  "sync_interval": "weekly (parameter checkpoint share)"
}
RL ajanlar aynÄ± veri tabanÄ±nÄ± (trade results) okur ama policy weights farklÄ±dÄ±r.
4ï¸âƒ£ VISUALIZATION LAYER
Her zaman dilimi ayrÄ± raporlanÄ±r:
visualization = {
  "15m_report": "visuals/15m_trades/",
  "1h_report": "visuals/1h_trades/",
  "fusion_dashboard": "visuals/combined_metrics.html"
}
TradeVisualizer 2.0 artÄ±k iki ayrÄ± renk kodu kullanÄ±r:
ğŸŸ© 15m iÅŸlemleri (breakout trades)
ğŸŸ¦ 1h iÅŸlemleri (trend trades)
5ï¸âƒ£ RISK MANAGEMENT
Ortak risk kontrolÃ¼:
risk_rules = {
  "max_portfolio_risk": 0.02,
  "max_drawdown": 0.08,
  "cooldown": "30m per coin",
  "max_daily_loss": "10 stoploss per day (total)",
  "dual_trade_protection": "allow both 15m and 1h only if directions match"
}
Yani:
AynÄ± coinâ€™de hem 15m hem 1h pozisyon aÃ§Ä±labilir yalnÄ±z yÃ¶n aynÄ±ysa.
Aksi halde kÃ¼Ã§Ã¼k (short-term) pozisyon kapanÄ±r.
â†’ Bu, Ã§akÄ±ÅŸmayÄ± engeller ama paralel stratejiyi korur.
6ï¸âƒ£ PERFORMANCE METRICS
Zaman Dilimi	Hedef	Ã–lÃ§Ã¼m YÃ¶ntemi
15m	Win rate > 57%	Trade count & short DD
1h	Profit factor > 1.4	Trend continuation
Ortak	Sharpe > 1.3	Fusion report
RL Metric	Episode reward growth	PPO logs
7ï¸âƒ£ SYSTEM PIPELINE
DATA â†’ (15m Engine)
     â†˜
      â†˜
       SIGNAL INTERPRETER
      â†—
     â†—
DATA â†’ (1h Engine)
        â†“
   POSITION MANAGER
        â†“
   RISK MANAGER
        â†“
   RL LEARNING & VISUALIZER
8ï¸âƒ£ LOGGING & STORAGE
logs/
 â”œâ”€â”€ trades_15m.csv
 â”œâ”€â”€ trades_1h.csv
 â”œâ”€â”€ fusion_summary.csv
 â”œâ”€â”€ visuals/15m_trades/
 â”œâ”€â”€ visuals/1h_trades/
 â””â”€â”€ fusion_dashboard.html
RL ajanlarÄ±nÄ±n parametre geÃ§miÅŸi:
/state/ppo_15m/
 /state/ppo_1h/
ğŸ§  Genel DavranÄ±ÅŸ Ã–zeti
15m motoru: kÄ±sa volatilite breakoutâ€™larÄ±nÄ± arar (hÄ±zlÄ± giriÅŸ/Ã§Ä±kÄ±ÅŸ).
1h motoru: trendi sÃ¼rdÃ¼rÃ¼r, stoplarÄ± gÃ¼venli taÅŸÄ±r.
Ã‡akÄ±ÅŸma kontrolÃ¼: yÃ¶nler zÄ±t ise kÄ±sa vadeli pozisyon iptal edilir.
RL: her timeframe kendi baÅŸarÄ±sÄ±nÄ± optimize eder ama global risk ortak.
Visual report: iki zaman dilimi ayrÄ± renklerle Ã§izilir, haftalÄ±k karÅŸÄ±laÅŸtÄ±rmalÄ± analiz yapÄ±lÄ±r.
ğŸ’¾ KÄ±sa Notlar
Bu yapÄ± v2.6 Ã¼zerine oturur â€” eski single-strategy sistem korunur.
Yeni sÃ¼rÃ¼m â€œmulti-agent, multi-timeframeâ€ yapÄ±dadÄ±r.
Her modÃ¼l baÄŸÄ±msÄ±z test edilebilir (Ã¶r. sadece 15m Ã§alÄ±ÅŸtÄ±rmak mÃ¼mkÃ¼n).
Claude tarafÄ±nda sen sadece â€œtradebot_betaâ€ altÄ±nda core/signal_generator.py ve adaptive_parameters.py gÃ¼ncellemelerini test edeceksin.
HazÄ±r olduÄŸunda Claudeâ€™a ÅŸu promptâ€™u verebilirsin:
â€œSistemi v2.7 dual-time adaptive yapÄ±ya geÃ§iriyorum. 15m iÃ§in SqueezeMomentum + SuperTrend + RVOL, 1h iÃ§in QQE MOD + Chandelier Exit + RVOL kombinasyonlarÄ±nÄ± entegre et. core/signal_generator.py ve adaptive_parameters.py dosyalarÄ±nÄ± buna gÃ¶re dÃ¼zenle, mevcut mimariyi koru.â€
