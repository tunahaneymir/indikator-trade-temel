AI TRADING SYSTEM ARCHITECTURE â€” v2.5 (Paper Trading)
ğŸ¯ AmaÃ§
15m ve 1h timeframeâ€™lerde Ã§alÄ±ÅŸan, coin bazlÄ± ve indikatÃ¶r bazlÄ± optimizasyon yapan,
RL destekli (PPO) akÄ±llÄ± sistem. Trend, momentum ve hacim sinyallerine gÃ¶re pozisyon aÃ§ar,
system exit ve hard stopâ€™u ayÄ±rÄ±r, tek yÃ¶nlÃ¼ pozisyon yÃ¶netir ve reversal iÅŸlemleri mantÄ±klÄ± ÅŸekilde yÃ¼rÃ¼tÃ¼r.
ğŸ—ï¸ Ana MimarÃ® Katmanlar
1ï¸âƒ£ DATA LAYER
AynÄ± (Binance Testnet real-time feed, 15mâ€“1h TF, cache 90 days).
ArtÄ±k â€œexecution modeâ€ parametresiyle Paper/Live ayrÄ±mÄ± aÃ§Ä±k:
data_sources = {
  "exchange": "Binance Testnet (real-time simulated)",
  "timeframes": ["15m", "1h"],
  "coins": "Top 20 by market cap",
  "cache": "90 days",
  "execution_mode": "paper",  # 'paper' or 'live'
}
2ï¸âƒ£ CORE ENGINE LAYER (Yeniden TanÄ±mlanmÄ±ÅŸ)
core_modules = {
  "signal_generator": "SuperTrend + MOST RSI + Volume Spike",
  "position_state_manager": "Controls LONG/SHORT/FLAT transitions",
  "signal_interpreter": "Determines buy/sell/hold based on confirmation logic",
  "rl_agent": "PPO policy-gradient learner",
  "risk_manager": "Dynamic ATR SL, DD, cooldown, and SL count checks"
}
âš™ï¸ Yeni Eklenen Alt ModÃ¼ller
ğŸ§© A) core/position_state_manager
AmaÃ§: Pozisyon durumlarÄ±nÄ± izlemek ve Ã§akÄ±ÅŸmasÄ±z yÃ¶n geÃ§iÅŸi saÄŸlamak.
State Machine MantÄ±ÄŸÄ±
states = ["FLAT", "LONG", "SHORT"]

if signal == "BUY":
    if state == "FLAT": open_long()
    elif state == "SHORT": close_short(); open_long()
    elif state == "LONG": maybe_scale_in()

elif signal == "SELL":
    if state == "FLAT": open_short()
    elif state == "LONG": close_long(); open_short()
    elif state == "SHORT": maybe_scale_in()

elif signal == "HOLD":
    manage_trailing_sl()
Ã–zellikler:
Hedging kapalÄ± â†’ aynÄ± coinde iki yÃ¶nlÃ¼ pozisyon yok.
â€œReversal logicâ€ akÄ±cÄ± â†’ Ã¶nce exit, sonra entry.
â€œConfirmation delayâ€ (Ã¶r. 1â€“3 bar) opsiyonu var: sidewaysde fren saÄŸlar.
Trade cooldown (per coin) â†’ gereksiz back-to-back sinyalleri filtreler.
ğŸ§© B) core/signal_interpreter
AmaÃ§: ÃœÃ§lÃ¼ indikatÃ¶r setini (trend, momentum, hacim) tekleÅŸtirip kesin karar Ã¼retmek.
KullanÄ±lan kaynaklar:
SuperTrend.direction â†’ UP/DOWN
MOST_RSI.signal â†’ BULL/BEAR
VolumeSpike.confirmed â†’ True/False
Karar tablosu:
Trend	Momentum	Hacim	SonuÃ§
UP	Bull	True	BUY
DOWN	Bear	True	SELL
UP	Bear	True	HOLD (uyumsuz sinyal)
DOWN	Bull	True	HOLD (uyumsuz sinyal)
-	-	False	HOLD (hacim yetersiz)
Ek filtreler:
confirmation_bars = 1â€“3 (trend yÃ¶nÃ¼ deÄŸiÅŸimi kalÄ±cÄ± mÄ±?)
noise_filter = EMA distance < 0.5% â†’ sideways ortam â†’ sinyali yoksay.
SonuÃ§: Sinyal kararsÄ±zsa flat kal, onaylÄ±ysa net BUY/SELL dÃ¶ndÃ¼r.
ğŸ§© C) adaptive/trend_confirmation_filter
AmaÃ§: Trend dÃ¶nÃ¼ÅŸlerinin gerÃ§ekten gÃ¼Ã§lÃ¼ olup olmadÄ±ÄŸÄ±nÄ± tespit eder.
Girdi: Trend flip (SuperTrend), RSI kesiÅŸimi, Hacim oranÄ±
Ã‡Ä±ktÄ±: True/False (onaylÄ± mÄ± deÄŸil mi)
MantÄ±k:
if (SuperTrend.flip and abs(RSI_slope) > threshold and VolumeSpike.confirmed):
    return True  # strong reversal
else:
    return False
Yan piyasalarda â€œfake flipâ€â€™leri Ã¶nler.
RL ajanÄ± bu sinyalin gÃ¼ven skorunu kullanarak reversal iÅŸlemlerine aÄŸÄ±rlÄ±k verir.
ğŸ§  Pozisyon AkÄ±ÅŸÄ± (Reversal Dahil)
SuperTrend DOWN â†’ BUY â†’ SELL dÃ¶nÃ¼ÅŸÃ¼:
Long kapatÄ±lÄ±r â†’ trend-confirmed flip â†’ Short aÃ§Ä±lÄ±r.
Arada 1 bar bekleme (cooldown) olabilir.
Sideways market:
Trend flip yok, EMA20-EMA50 arasÄ± <0.5% â†’ sistem â€œHOLDâ€ kalÄ±r.
Fiyat stop-lossâ€™a Ã§arparsa:
Bu â€œhard stopâ€ sayÄ±lÄ±r â†’ risk manager tetiklenir.
Sistem cooldownâ€™a geÃ§mez, sadece istatistik gÃ¼ncellenir.
System exit (indikasyonla kapanÄ±ÅŸ):
â€œSystem exitâ€ â‰  â€œstop-loss.â€
RL ajan yeni sinyali bekler, flat modda gÃ¶zlem yapar.
ğŸ“‰ Risk & Cooldown Uyumu
Kural	Etkisi	AÃ§Ä±klama
DD â‰¥ 8 %	4h cooldown	TÃ¼m coinlerde iÅŸlemler durur
GÃ¼nlÃ¼k 10 hard SL	GÃ¼n sonuna kadar duraklat	Sadece yeni iÅŸlem engellenir
7 ardÄ±ÅŸÄ±k coin kaybÄ±	O coine ban	DiÄŸerleri devam eder
System exit	Etkilenmez	Stop sayÄ±lmaz, iÅŸlem kapanÄ±r
ğŸ” Ã–ÄŸrenme DÃ¶ngÃ¼sÃ¼ (Coin & TF bazlÄ±)
RL ajan her coin ve TF iÃ§in ayrÄ± memory buffer tutar.
Her buffer 3 iÅŸlemde quick, 20 iÅŸlemde deep retrain tetikler.
Bayesian optimizer parametreleri coin + TF Ã¶zelinde gÃ¼nceller.
best_params.json ve best_timeframe.json sÃ¼rekli gÃ¼ncel tutulur.
ğŸ“Š Performans Ã–lÃ§Ã¼tleri (v2.5)
Metrik	Hedef	Ä°zleme Modu
Win Rate	> %55	Realtime dashboard
Profit Factor	> 1.3	HaftalÄ±k rapor
Sharpe	> 1.2	AylÄ±k rapor
Max DD	< %8	GÃ¼nlÃ¼k kontrol
Trade SayÄ±sÄ±	> 1000 (6 ay)	Sistem loglarÄ±
ğŸ§© ModÃ¼ller ArasÄ± Veri AkÄ±ÅŸÄ± (Zincir)
Signal Generator â”€â–¶ Signal Interpreter â”€â–¶ Trend Confirmation Filter â”€â–¶ Position State Manager â”€â–¶ Risk Manager â”€â–¶ RL Agent
Her katman sadece bir sonrakine net bilgi verir (Ã¶rneÄŸin â€œBUYâ€, â€œSELLâ€, â€œHOLDâ€).
Geri bildirim (reward, DD, stop event) yalnÄ±z RL ajanÄ±na gider.
BÃ¶ylece modÃ¼ller baÄŸÄ±msÄ±z, ama senkronize Ã§alÄ±ÅŸÄ±r.
ğŸ’¾ Loglama ve Ä°zleme
Her pozisyon deÄŸiÅŸimi: entry_type, exit_reason, profit/loss, ATR_value, signal_confidence
Stop eventleri ve cooldownâ€™lar gÃ¼nlÃ¼k rapora yazÄ±lÄ±r.
Logâ€™lar hem CSV hem JSON formatÄ±nda saklanÄ±r (logs/trade_YYYYMMDD.csv).
ğŸš€ Sistem Ã–zeti
Ã–zellik	Durum
Coin bazlÄ± optimizasyon	âœ… Aktif
Timeframe bazlÄ± adaptasyon	âœ… Aktif
Reversal (Longâ†’Short, Shortâ†’Long)	âœ… MantÄ±klÄ± & filtreli
Sideways gÃ¼rÃ¼ltÃ¼ filtreleme	âœ… Var
Dynamic ATR SL	âœ… Aktif
System exit / Hard SL ayrÄ±mÄ±	âœ… Net
Risk yÃ¶netimi Ã§akÄ±ÅŸmasÄ±	âŒ Yok
Cooldown / ban mantÄ±ÄŸÄ±	âœ… Dengeli
Real-time demo mode	âœ… Binance Testnet
Multi-module sync	âœ… TÃ¼m katmanlar baÄŸÄ±msÄ±z ama koordine
